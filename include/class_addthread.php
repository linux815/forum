<?phpinclude_once('include/class_base.php');include_once('include/class_database.php');include_once('include/class_user.php');//// Контроллер страницы редактирования.//class C_AddThread extends C_Base{	private $thread_name;  // заголовок	private $description;	// текст	private $titl;	private $tex;	private $error;	// сообщение об ошибке	//	// Конструктор.	//	function __construct()	{			}		//	// Виртуальный обработчик запроса.	//	protected function OnInput()	{		parent::OnInput();				$database = new Database();				$this->title = $this->title . ' :: Добавление темы';				// Менеджеры.		$mUsers = M_Users::Instance();				// Очистка старых сессий.		$mUsers->ClearSessions();				// Текущий пользователь.		$this->user = $mUsers->Get();		if (isset($_POST['submitForm']))		{			$forum_id = $_GET['id'];			$thread_name = $_POST['theme'];			$description = $_POST['description'];			$titl = "";			$text = $_POST['text'];						// удачная отправка формы			$database->thread_insert($forum_id, $thread_name, $description, $titl, $text, $this->user['id_user'], $this->user['id_user'], $this->user['name']);			$database->forum_update_stat($forum_id);						header('Location: index.php?c=showforum&id='.$forum_id.'&page=1');			die();				}		else		{					echo "";		}	}		//	// Виртуальный генератор HTML.	//		protected function OnOutput()	{		$vars = array('description' => $this->description, 'thread_name' => $this->thread_name, 'id_thread' => $this->id_threads, 'titl' => $this->titl, 'tex' => $this->tex, 'user' => $this->user);			$this->content = $this->Template('templates/v_addthread.php', $vars);		parent::OnOutput();	}	}