<?phpdeclare(strict_types=1);namespace App;class AddPostController extends BaseController{    private string $header = '';    private string $post_text = '';    private string $titl = '';    private string $text = '';    private string $error = '';    protected function OnInput(): void    {        parent::OnInput();        $this->title .= ' :: Добавление сообщения';        $database = new Database();        $mUsers = Users::Instance();        // Очистка старых сессий и получение пользователя        $mUsers->ClearSessions();        $this->user = $mUsers->Get();        if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['submitForm'])) {            $thread_id = (int)($_GET['id'] ?? 0);            $forum_id = (int)($_GET['forums'] ?? 0);            $this->post_text = trim($_POST['text'] ?? '');            if (!empty($this->user['id_user'])) {                $userId = (int)$this->user['id_user'];                $userName = $this->user['name'] ?? '';                $database->posts_insert($thread_id, '', $userId, $this->post_text);                $database->forum_update_last($userId, $userName, $thread_id);                $database->forum_update_last2($userId, $userName, $forum_id, $thread_id);                unset($_SESSION['text'], $_SESSION['quote']);                header("Location: index.php?c=showmessage&forums={$forum_id}&id={$thread_id}&page=1");                exit;            }        }    }    protected function OnOutput(): void    {        $vars = [            'header' => $this->header,            'post_text' => $this->post_text,            'id_thread' => $this->id_threads ?? null,        ];        $this->content = $this->Template('templates/v_addpost.php', $vars);        parent::OnOutput();    }}