<?php/** * Шаблон главной страницы * ======================= */?><!DOCTYPE html><html lang="ru"><head>    <meta charset="UTF-8" />    <title>Форум</title>    <!-- Bootstrap 5 CDN -->    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">    <style>        /* Минимальные кастомные стили для таблиц */        .ipbtable {            width: 100%;            border-collapse: collapse;        }        .ipbtable th, .ipbtable td {            border: 1px solid #dee2e6;            padding: 0.5rem;            vertical-align: middle;        }        .forumdesc {            font-size: 0.875rem;            color: #555;        }        .row1 {            background-color: #f8f9fa;        }        .row2 {            background-color: #ffffff;        }        .borderwrap {            border: 1px solid #dee2e6;            padding: 1rem;            margin-bottom: 1rem;            background: #fff;        }    </style></head><body class="bg-light"><div class="container my-4">    <?php if (!empty($user) && $user != 0): ?>        <div class="mb-3">            <a href="index.php?c=addthread&id=<?= htmlspecialchars($_GET['id'] ?? '') ?>" class="btn btn-primary btn-sm me-2">Добавить тему</a>            <a href="index.php?c=add&id=<?= htmlspecialchars($_GET['id'] ?? '') ?>" class="btn btn-secondary btn-sm">Добавить раздел</a>        </div>    <?php endif; ?>    <?php if (empty($array_forums) || ($array_forums[0] == 0 || $array_forums[0] === "")): ?>        <!-- Нет форумов -->    <?php else: ?>        <div class="borderwrap" id="fo_1">            <table class="ipbtable table table-bordered table-hover">                <thead class="table-light">                <tr>                    <th colspan="2" style="width: 66%;">Форум</th>                    <th style="text-align:center; width: 7%;">Тем</th>                    <th style="text-align:center; width: 7%;">Ответов</th>                    <th style="width: 35%;">Последнее сообщение</th>                </tr>                </thead>                <tbody>                <?php if (!isset($_GET['jh'])): ?>                    <?php foreach ($array_forums as $row): ?>                        <tr>                            <td class="row2 text-center" style="width:1%;">                                <img src="images/<?= htmlspecialchars($row['icon_img']) ?>" alt="" border="0" />                            </td>                            <td class="row2">                                <b><a href="index.php?c=showforum&id=<?= (int)$row['id_forums'] ?>&page=1"><?= htmlspecialchars($row['forum_name']) ?></a></b><br/>                                <span class="forumdesc">                                <?= nl2br(htmlspecialchars($row['description'])) ?><br />                                <?php if (!empty($user) && $user != 0): ?>                                    <a href="index.php?c=confirm&id=<?= (int)($_GET['id'] ?? 0) ?>&forum=<?= (int)$row['id_forums'] ?>">Удалить</a> |                                    <a href="index.php?c=edit&forum=<?= (int)$row['id_forums'] ?>">Редактировать</a>                                <?php endif; ?>                            </span>                            </td>                            <td class="row1 text-center"><?= (int)$row['threads_quantity'] ?></td>                            <td class="row1 text-center"><?= (int)$row['posts_quantity'] ?></td>                            <?php if (empty($row['last_author'])): ?>                                <td class="row1" nowrap="nowrap"><span>Сообщений нет...<br /><b></b></span></td>                            <?php else: ?>                                <td class="row1" nowrap="nowrap">                                <span>                                    <?= htmlspecialchars($row['last_post']) ?><br />                                    <b>Автор:</b> <?= htmlspecialchars($row['last_author']) ?>                                </span>                                </td>                            <?php endif; ?>                        </tr>                    <?php endforeach; ?>                <?php endif; ?>                </tbody>            </table>        </div>    <?php endif; ?>    <div class="borderwrap" id="fo_2">        <?php if (empty($array_threads)): ?>            Тем нет        <?php else: ?>            <table class="ipbtable table table-bordered table-hover">                <thead class="table-light">                <tr>                    <th colspan="2" style="width:66%;">Название темы</th>                    <th style="text-align:center; width:7%;">Ответов</th>                    <th style="text-align:center; width:7%;">Автор</th>                    <th style="text-align:center; width:7%;">Просмотров</th>                    <th style="width:35%;">Последнее сообщение</th>                </tr>                </thead>                <tbody>                <?php if (!isset($_GET['showforum'])): ?>                    <?php if (!empty($posts) && $posts[0] != 0): ?>                        <?php foreach ($array_threads as $key): ?>                            <tr>                                <td class="row2 text-center" style="width:1%;">                                    <img src="images/norm.gif" alt="" border="0" />                                </td>                                <td class="row2">                                    <b><a href="index.php?c=showmessage&forums=<?= (int)($_GET['id'] ?? 0) ?>&id=<?= (int)$key['id_thread'] ?>&page=1"><?= htmlspecialchars($key['thread_name']) ?></a></b><br/>                                    <span class="forumdesc">                                        <?= nl2br(htmlspecialchars($key['description'])) ?><br/>                                        <?php if (!empty($user) && $user != 0): ?>                                            <a href="index.php?c=confirm&id=<?= (int)$key['forum_id'] ?>&thread=<?= (int)$key['id_thread'] ?>">Удалить</a> |                                            <a href="index.php?c=editthread&thread=<?= (int)$key['id_thread'] ?>">Редактировать</a>                                        <?php endif; ?>                                    </span>                                </td>                                <td class="row1 text-center"><?= (int)$key['posts_quantity'] ?></td>                                <td class="row1 text-center"><?= htmlspecialchars($key['name']) ?></td>                                <td class="row1 text-center"><?= (int)$key['hits_quantity'] ?></td>                                <td class="row1" nowrap="nowrap">                                    <span>                                        <?php                                        if ($key['last_post'] === "0000-00-00 00:00:00") {                                            echo htmlspecialchars($key['date']);                                        } else {                                            echo htmlspecialchars($key['last_post']);                                        }                                        ?><br/>                                        <b>Автор:</b>                                        <?php                                        if (empty($key['last_author'])) {                                            echo htmlspecialchars($key['name']);                                        } else {                                            echo htmlspecialchars($key['last_author']);                                        }                                        ?>                                    </span>                                </td>                            </tr>                        <?php endforeach; ?>                    <?php endif; ?>                <?php endif; ?>                </tbody>            </table>        <?php endif; ?>    </div>    <div class="mt-3">        <?php        if (($page ?? 1) != 1 || !empty($nextpage)) {            echo $pervpage ?? '';            echo $page2left ?? '';            echo $page1left ?? '';            echo '<b>' . (($page ?? 1)) . '</b>';            echo $page1right ?? '';            echo $page2right ?? '';            echo $nextpage ?? '';        }        ?>    </div></div><!-- Bootstrap JS Bundle (Popper + Bootstrap JS) --><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script></body></html>